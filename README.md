# Hackathon-API

## サーバー

### ファイル構成

#### 1. main.go

- まず、認証情報を送ってデータベースにアクセス

```環境変数は Cloud Run でのサービス作成時に設定```

- フロントエンドからのリクエストの受理

```デプロイされたフロントエンドからのリクエストを受理するようにアクセス権を設定```

- サーバーを立ててリクエストをデータベースに送る

```Cloud Run のデフォルトのポート番号に合わせて8080でリスニング```

- データベースからのレスポンスを受け取ってフロントに返す

#### 2. go.mod

- goのバージョンや必要なパッケージを記述

#### 3. go.sum

- パッケージ等の依存関係を記述

```依存関係がおかしかったらターミナル上でコマンドを実行して更新```

#### 4. Dockerfile

- コンテナを作って、その中でgoサーバーを立ち上げる

```go.sum も忘れずにコンテナ内にコピー```
```Cloud Run のデフォルトのポート番号に合わせて8080を設定```

### デプロイ先

Cloud RUN

## データベース

Cloud SQL で作成済み

### 編集方法

#### 1.GoLandでDBツールを使い、ユーザー情報、SSLキーを指定して Cloud SQL にアクセス

- この時、入力する情報は Cloud SQL 上のユーザー、データベースから確認できる
- SSL キーは [接続] → [セキュリティ] から確認、再発行できる
- 暫定では Downloads の階層に3つのキーファイルを保存済み

#### 2.リフレッシュして DB を最新にする
#### 3.コンソールで SQL のコードを書いて編集

```最終的には main.go 内にリクエストに応じたSQLコードを実行するプログラムを書くことで、フロントエンドでの処理によって DB を編集することになる```

```env.sh はメモとしておいているだけで使わない```